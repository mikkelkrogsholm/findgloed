# Findgloed local environment
# Apple Silicon M3 + Docker-only local development

# ---------- Runtime ----------
APP_ENV=development
APP_NAME=findgloed

# ---------- Nonstandard ports ("GLOD" => 4563 on alphanumeric keypad) ----------
APP_PORT=4563
API_PORT=4564
POSTGRES_PORT=4565
REDIS_PORT=4566
MAILDEV_PORT=4567
ADMINER_PORT=4568

# ---------- App URLs ----------
APP_URL=http://localhost:4563
API_URL=http://localhost:4564
CORS_ORIGINS=http://localhost:4563

# ---------- Frontend feature flags ----------
VITE_ENABLE_DESIGN_PAGE=true
VITE_THEME_PRESET=anthro-v1

# ---------- Waitlist / Consent ----------
WAITLIST_CONFIRM_PATH=/waitlist/confirm
WAITLIST_CONFIRM_TOKEN_TTL_HOURS=72
WAITLIST_RESEND_COOLDOWN_MINUTES=15

# ---------- Rate limiting ----------
REDIS_URL=redis://redis:6379
RATE_LIMIT_ENABLED=true
RATE_LIMIT_FAIL_OPEN=true
# In production this should be false.
RATE_LIMIT_WAITLIST_MAX=5
RATE_LIMIT_WAITLIST_WINDOW_SECONDS=60
RATE_LIMIT_CONFIRM_MAX=10
RATE_LIMIT_CONFIRM_WINDOW_SECONDS=60
TRUST_PROXY=false

# ---------- Database ----------
POSTGRES_DB=findgloed
POSTGRES_USER=findgloed
POSTGRES_PASSWORD=change_me
DATABASE_URL=postgresql://findgloed:change_me@localhost:4565/findgloed
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=false

# ---------- Auth (Idura / MitID) ----------
IDURA_BASE_URL=https://idura.eu
IDURA_ISSUER_URL=
IDURA_CLIENT_ID=
IDURA_CLIENT_SECRET=
IDURA_REDIRECT_URI=http://localhost:4564/auth/callback

# ---------- Email (Resend) ----------
RESEND_API_KEY=
RESEND_FROM_EMAIL=
SUPPORT_EMAIL=

# ---------- Payments (Stripe) ----------
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# ---------- Security ----------
# Use URL-safe secrets (letters, numbers, _, -) to avoid Docker Compose interpolation issues.
JWT_SECRET=replace_with_long_random_value
ENCRYPTION_KEY=replace_with_32_char_min_value
ENABLE_HSTS=false
HSTS_MAX_AGE_SECONDS=31536000

# ---------- Health/ops ----------
HEALTHCHECK_PATH=/api/health
